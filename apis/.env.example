# =============================================================================
# GameHub API — Root Environment Variables
# Copy this to .env and fill in real values. NEVER commit .env to git.
# =============================================================================

# --- MongoDB ---
MONGO_INITDB_ROOT_USERNAME=gamehub
MONGO_INITDB_ROOT_PASSWORD=change_me_in_production
MONGO_URI=mongodb://gamehub:change_me_in_production@mongo:27017/gamehub?replicaSet=rs0&authSource=admin

# --- Redis (Session store + PubSub event bus) ---
REDIS_PASSWORD=change_me_in_production
REDIS_ADDR=redis:6379

# Redis PubSub channels (constants shared across services)
# REDIS_CHANNEL_GAME_OUTCOME=game:outcome
# REDIS_CHANNEL_DEPOSIT=payment:deposit
# REDIS_CHANNEL_WITHDRAWAL=payment:withdrawal

# --- Vault ---
VAULT_ADDR=http://vault:8200
VAULT_TOKEN=dev-root-token   # Replace with AppRole token in production

# --- JWT (RS256) ---
# For local development we generate keys into infra/dev-secrets
JWT_PRIVATE_KEY_PATH=./infra/dev-secrets/jwt_private.pem
JWT_PUBLIC_KEY_PATH=./infra/dev-secrets/jwt_public.pem
JWT_ACCESS_TTL_MINUTES=15
JWT_REFRESH_TTL_DAYS=7
JWT_ISSUER=gamehub-auth

# --- OAuth Providers ---
GOOGLE_CLIENT_ID=your_google_client_id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your_google_client_secret
APPLE_CLIENT_ID=com.yourcompany.gamehub          # Apple Service ID
APPLE_TEAM_ID=XXXXXXXXXX
APPLE_KEY_ID=XXXXXXXXXX
APPLE_PRIVATE_KEY_PATH=/run/secrets/apple_auth.p8

# --- OTP (Phone Authentication) ---
# Using Hubtel SMS service for OTP delivery
HUBTEL_SMS_CLIENT_ID=your_hubtel_sms_client_id
HUBTEL_SMS_CLIENT_SECRET=your_hubtel_sms_client_secret
HUBTEL_SMS_FROM=GameHub
OTP_TTL_MINUTES=5
OTP_LENGTH=6

# --- Hubtel Mobile Money (Deposits & Withdrawals) ---
HUBTEL_PAYMENT_CLIENT_ID=your_hubtel_payment_client_id
HUBTEL_PAYMENT_CLIENT_SECRET=your_hubtel_payment_client_secret
HUBTEL_PAYMENT_ACCOUNT_NUMBER=your_hubtel_merchant_account_number
HUBTEL_PRIMARY_CALLBACK_URL=https://api.gamehub.io/webhooks/payment/hubtel
HUBTEL_CHECKOUT_URL=https://checkout.hubtel.com/api/checkout/initiate
HUBTEL_SEND_MONEY_URL=https://api.hubtel.com/v2/merchant/send-money
HUBTEL_WEBHOOK_SECRET=your_hubtel_webhook_hmac_secret
# Supported channels: mtn-gh, vodafone-gh, airteltigo-gh
HUBTEL_SUPPORTED_CHANNELS=mtn-gh,vodafone-gh,airteltigo-gh

# --- Crypto Deposits (Tatum) ---
TATUM_API_KEY=your_tatum_api_key
TATUM_WEBHOOK_SECRET=your_tatum_webhook_hmac_secret
TATUM_TESTNET=false   # Set true in development

# HD Wallet master seed (loaded from Vault at runtime — do NOT set here in prod)
# MASTER_WALLET_SEED=      <-- must come from Vault

# --- Deriv ---
DERIV_APP_ID=your_deriv_app_id
DERIV_WS_URL=wss://ws.binaryws.com/websockets/v3
# Pool accounts: add as many as needed (DERIV_ACCOUNT_1_TOKEN, _2_TOKEN, ...)
DERIV_ACCOUNT_1_TOKEN=a1-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
DERIV_ACCOUNT_2_TOKEN=a1-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# --- Service Ports ---
AUTH_SERVICE_PORT=8001
GAME_SESSION_PORT=8002
PAYMENT_GATEWAY_PORT=8003
WALLET_SERVICE_PORT=8004
TRADER_POOL_PORT=8005

# --- Internal Service URLs (used by services to call each other) ---
WALLET_SERVICE_URL=http://wallet-service:8004
TRADER_POOL_URL=http://trader-pool:8005

# --- Internal Service Auth ---
INTERNAL_SERVICE_KEY=dev-internal-key

# --- Environment ---
APP_ENV=development   # development | production
LOG_LEVEL=info        # debug | info | warn | error
